{"version":3,"sources":["components/map.js","components/drugstore-card.js","components/city-select.js","App.js","serviceWorker.js","index.js"],"names":["L","window","getColor","d","onEachFeature","feature","layer","popupContent","properties","name","mask_adult","mask_child","bindPopup","Map","props","state","myPlace","this","markerPool","markerClusterGroup","zoomToBoundsOnClick","removeOutsideVisibleBounds","maskMap","map","center","latitude","longitude","zoom","layers","tileLayer","attribution","maxZoom","id","accessToken","locate","setView","on","e","setState","latlng","marker","addTo","openPopup","legend","control","position","onAdd","div","DomUtil","create","grades","labels","i","length","push","innerHTML","join","getLegendControl","customAction","Toolbar2","Action","extend","options","toolbarIcon","html","tooltip","addHooks","setLatLng","flyTo","Control","actions","clearLayers","focus","_focus","LatLng","lat","lng","geoJSON","markersData","style","color","pointToLayer","maskCount","circleMarker","radius","weight","opacity","fillOpacity","fillColor","getStyle","addLayer","React","Component","DrugdrugstoreCard","handleClick","drugstore","onClickDrugstore","mask","total","percent","currentLocation","city","district","className","features","address","substring","Card","key","Content","Header","onClick","geometry","Meta","phone","Description","href","target","rel","service_note","Message","size","Icon","extra","Progress","getPercent","indicating","SelectCountry","handleCity","value","onSelectCity","currentCity","CITY_AREA","find","item","index","array","districtOptions","districts","text","_district","onSelectDistrict","handleDistrict","cityOptions","Dropdown","button","floating","labeled","scrolling","icon","onChange","App","handleClickDrugstore","coordinates","viewport","visible","fetch","then","response","json","geojson","document","body","classList","add","catch","err","console","log","Button","compact","labelPosition","toggleSidebar","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4c893aaf.chunk.js","sourcesContent":["import React from 'react';\n\n// Import CSS from Leaflet and plugins.\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport 'leaflet-toolbar/dist/leaflet.toolbar.css';\n\n// Import JS from Leaflet and plugins.\nimport 'leaflet.markercluster';\nimport 'leaflet-toolbar';\n\nimport '../styles/map.scss';\n\nconst L = window.L;\n\nconst getColor = d => {\n  return d > 200 ? '#7cafc2' : d > 150 ? '#86c1b9' : d > 100 ? '#a1b56c' : d > 50 ? '#f7ca88' : d > 0 ? '#dc9656' : 'rgba(236,222,239,.9)';\n};\n\nconst getStyle = maskCount => {\n  return {\n    radius: 8,\n    weight: 1,\n    opacity: 1,\n    fillOpacity: 1,\n    fillColor: getColor(maskCount)\n  };\n};\n\nconst getLegendControl = () => {\n  //Custom Legend Control.\n  const legend = L.control({ position: 'bottomright' });\n  legend.onAdd = () => {\n    const div = L.DomUtil.create('div', 'legend-panel');\n    const grades = [0, 50, 100, 150, 200];\n    const labels = [];\n\n    for (let i = 0; i < grades.length; i++) {\n      labels.push(`\n        <div class=\"legend-item\">\n          <i style=\"background:${getColor(grades[i] + 1)}\"></i>\n          ${grades[i]}${grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+'}\n        </div>\n      `);\n    }\n    div.innerHTML = labels.join('');\n    return div;\n  };\n  return legend;\n};\n\nconst onEachFeature = (feature, layer) => {\n  const popupContent = `\n      <div class=\"info-window\">\n        <h3>${layer.feature.properties.name}</h3>\n        <p>成人口罩\b：${feature.properties.mask_adult} 個</p>\n        <p>兒童口罩：${feature.properties.mask_child} 個</p>\n      </div>\n    `;\n  layer.bindPopup(popupContent);\n};\n\nexport default class Map extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      myPlace: null,\n    };\n  }\n\n  componentDidMount() {\n    this.markerPool = L.markerClusterGroup({\n      zoomToBoundsOnClick: true,\n      removeOutsideVisibleBounds: true\n    });\n\n    // Create map.\n    this.maskMap = L.map('map-canvas', {\n      center: [this.props.latitude, this.props.longitude],\n      zoom: 16,\n      layers: [\n        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\n          attribution:\n            'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n          maxZoom: 18,\n          id: 'mapbox/streets-v11',\n          accessToken: 'pk.eyJ1IjoiaWFubGlhbzE5ODciLCJhIjoiY2s2OHFmMzQ0MDV5MjN1bjlmMzF2a3htZyJ9.n70D4lI2aqZ1dj-EGCuqJw'\n        })\n      ]\n    });\n\n    // Geolocation.\n    this.maskMap.locate({ setView: true, maxZoom: 16 });\n    this.maskMap.on('locationfound', e => {\n      this.setState({ myPlace: e.latlng });\n      // Add marker.\n      this.marker = L.marker(e.latlng)\n        .addTo(this.maskMap)\n        .bindPopup('You are here!')\n        .openPopup();\n    });\n\n    const legend = getLegendControl();\n    legend.addTo(this.maskMap);\n\n    // ToolBar.\n    const customAction = L.Toolbar2.Action.extend({\n      options: {\n        toolbarIcon: {\n          html: '<div><i aria-hidden=\"true\" class=\"teal street view large icon\"></i></div>',\n          tooltip: 'Go to the Eiffel Tower'\n        }\n      },\n      addHooks: () => {\n        this.marker\n          .setLatLng(this.state.myPlace)\n          .bindPopup('You are here!')\n          .openPopup();\n        this.maskMap.flyTo(this.state.myPlace, 18);\n      }\n    });\n    new L.Toolbar2.Control({\n      actions: [customAction]\n    }).addTo(this.maskMap);\n  }\n\n  componentDidUpdate() {\n    this.markerPool.clearLayers();\n\n    if (this.props.focus) {\n      const _focus = new L.LatLng(this.props.focus[1], this.props.focus[0]);\n      this.marker\n        .setLatLng(_focus)\n        .bindPopup(\n          `\n          <a href=\"https://www.google.com.tw/maps/dir/${this.state.myPlace.lat},${this.state.myPlace.lng}/${this.props.focus[1]},${this.props.focus[0]}\" target=\"_blank\" rel=\"noopener noreferrer\">\n            導航到這\n          </a>\n        `\n        )\n        .openPopup();\n      this.maskMap.flyTo(_focus, 18);\n    }\n\n    L.geoJSON(this.props.markersData, {\n      style: function(feature) {\n        return { color: feature.properties.color };\n      },\n      onEachFeature,\n      pointToLayer: (feature, latlng) => {\n        const maskCount = feature.properties.mask_adult + feature.properties.mask_child;\n        const marker = L.circleMarker(latlng, getStyle(maskCount));\n\n        this.markerPool.addLayer(marker);\n        return marker;\n      }\n    });\n\n    this.maskMap.addLayer(this.markerPool);\n  }\n\n  render() {\n    return <div id=\"map-canvas\"></div>;\n  }\n}\n","import React from 'react';\nimport { Card, Progress, Message, Icon } from 'semantic-ui-react';\n\nexport default class DrugdrugstoreCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  getPercent(mask, total) {\n    let percent = mask / total;\n    return percent > 1 ? 100 : percent * 100;\n  }\n\n  handleClick = drugstore => {\n    this.props.onClickDrugstore(drugstore);\n  };\n\n  render() {\n    const currentLocation = `${this.props.city}${this.props.district}`;\n\n    return (\n      <div className=\"floating-panel__list\">\n        {this.props.markersData &&\n          this.props.markersData.features.map(drugstore => {\n            return drugstore.properties.address.substring(0, currentLocation.length) === currentLocation ? (\n              <Card key={drugstore.properties.id}>\n                <Card.Content>\n                  <Card.Header onClick={() => this.handleClick(drugstore.geometry)}>{drugstore.properties.name}</Card.Header>\n                  <Card.Meta>{drugstore.properties.phone}</Card.Meta>\n                  <Card.Description>\n                    <a href={`https://www.google.com.tw/maps/place/${drugstore.properties.address}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                      {drugstore.properties.address}\n                    </a>\n                    <br />\n                    {drugstore.properties.service_note === '' || drugstore.properties.service_note === '無特定' ? null : (\n                      <Message size=\"tiny\">\n                        <Icon name=\"bullhorn\" />\n                        {drugstore.properties.service_note}\n                      </Message>\n                    )}\n                  </Card.Description>\n                </Card.Content>\n                <Card.Content extra>\n                  <Progress percent={this.getPercent(drugstore.properties.mask_adult, 200)} indicating>\n                    成人:{drugstore.properties.mask_adult}\n                  </Progress>\n                  <Progress percent={this.getPercent(drugstore.properties.mask_child, 50)} indicating>\n                    兒童:{drugstore.properties.mask_child}\n                  </Progress>\n                </Card.Content>\n              </Card>\n            ) : null;\n          })}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\n\nimport CITY_AREA from '../data/city-area.json';\n\nexport default class SelectCountry extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cityOptions: CITY_AREA.map(item => ({\n        key: item.id,\n        text: item.name,\n        value: item.name\n      })),\n      districtOptions: [\n        { key: 1, text: '中正區', value: '中正區' },\n        { key: 2, text: '大同區', value: '大同區' },\n        { key: 3, text: '中山區', value: '中山區' },\n        { key: 4, text: '松山區', value: '松山區' },\n        { key: 5, text: '大安區', value: '大安區' },\n        { key: 6, text: '萬華區', value: '萬華區' },\n        { key: 7, text: '信義區', value: '信義區' },\n        { key: 8, text: '士林區', value: '士林區' },\n        { key: 9, text: '北投區', value: '北投區' },\n        { key: 10, text: '內湖區', value: '內湖區' },\n        { key: 11, text: '南港區', value: '南港區' },\n        { key: 12, text: '文山區', value: '文山區' }\n      ],\n      city: '台北市',\n      district: '大安區'\n    };\n  }\n\n  handleCity = (e, { value }) => {\n    this.props.onSelectCity(value);\n\n    const currentCity = CITY_AREA.find(function(item, index, array) {\n      return item.name === value;\n    });\n    this.setState({\n      city: value,\n      districtOptions: currentCity.districts.map(item => ({\n        key: item.id,\n        text: item.name,\n        value: item.name\n      }))\n    });\n\n    if (currentCity.districts && currentCity.districts.length > 1) {\n      const _district = currentCity.districts[0].name;\n      this.setState({\n        district: _district\n      });\n      this.props.onSelectDistrict(_district);\n    }\n  };\n\n  handleDistrict = (e, { value }) => {\n    this.setState({\n      district: value\n    });\n    this.props.onSelectDistrict(value);\n  };\n\n  render() {\n    const { cityOptions, districtOptions, city, district } = this.state;\n\n    return (\n      <div>\n        <Dropdown\n          button\n          className=\"icon teal\"\n          floating\n          labeled\n          scrolling\n          icon=\"map marker alternate\"\n          options={cityOptions}\n          onChange={this.handleCity}\n          text={city}\n        />\n        <Dropdown\n          button\n          className=\"icon teal\"\n          floating\n          labeled\n          scrolling\n          icon=\"map marker alternate\"\n          options={districtOptions}\n          onChange={this.handleDistrict}\n          text={district}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport MaskMap from './components/map';\nimport DrugstoreCard from './components/drugstore-card';\nimport CitySelect from './components/city-select';\n\nimport { Button, Icon } from 'semantic-ui-react';\n\nimport './App.css';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewport: {\n        latitude: 25.030313,\n        longitude: 121.54924,\n        zoom: 16\n      },\n      drugstore: '',\n      focus: null,\n      visible: false,\n      city: '台北市',\n      district: '大安區'\n    };\n  }\n\n  componentDidMount() {\n    fetch('https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json')\n      .then(response => response.json())\n      .then(geojson => {\n        this.setState({ drugstore: geojson });\n        document.body.classList.add('dom-ready');\n      })\n      .catch(err => {\n        console.log('錯誤:', err);\n      });\n  }\n\n  toggleSidebar(visible) {\n    this.setState({ visible: !visible });\n  }\n\n  handleCity = city => {\n    this.setState({ city });\n  };\n\n  handleDistrict = district => {\n    this.setState({ district });\n  };\n\n  handleClickDrugstore = drugstore => {\n    this.setState({\n      focus: drugstore.coordinates\n    });\n  };\n\n  render() {\n    const { viewport, drugstore, city, district, focus } = this.state;\n\n    return (\n      <div className=\"App\">\n        <MaskMap {...viewport} markersData={drugstore} focus={focus}></MaskMap>\n        <div className={this.state.visible ? 'floating-panel is-visible' : 'floating-panel'}>\n          <CitySelect onSelectCity={this.handleCity} onSelectDistrict={this.handleDistrict}></CitySelect>\n          <DrugstoreCard markersData={drugstore} city={city} district={district} onClickDrugstore={this.handleClickDrugstore}></DrugstoreCard>\n          <Button icon compact color=\"teal\" labelPosition=\"right\" className=\"floating-panel__close\" onClick={() => this.toggleSidebar(this.state.visible)}>\n            關閉\n            <Icon name={this.state.visible ? 'angle double right' : 'angle double left'} />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}